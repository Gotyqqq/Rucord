# Rucord — Упрощённый аналог Discord

Rucord — это веб-приложение для общения, вдохновлённое Discord. Поддерживает серверы, текстовые каналы, обмен сообщениями в реальном времени, роли и права доступа.

---

## Что нужно установить (предварительные требования)

Перед запуском проекта на вашем компьютере должен быть установлен **Node.js** — это среда для запуска JavaScript вне браузера.

### Шаг 0: Установка Node.js

1. Откройте сайт: https://nodejs.org/
2. Скачайте версию **LTS** (рекомендуемая, зелёная кнопка)
3. Запустите скачанный файл и следуйте инструкциям установщика (жмите "Next" / "Далее" на всех шагах)
4. **Важно:** На шаге "Tools for Native Modules" поставьте галочку, чтобы установились инструменты сборки (это нужно для библиотеки `better-sqlite3`)
5. После установки перезагрузите компьютер

### Проверка установки

Откройте **PowerShell** (нажмите Win+R, введите `powershell`, нажмите Enter) и выполните:

```
node --version
npm --version
```

Если выведутся номера версий (например `v20.11.0` и `10.2.0`) — всё готово!

---

## Как запустить проект

### Шаг 1: Открыть терминал в папке проекта

Откройте PowerShell и перейдите в папку проекта:

```
cd "C:\Users\ulyan\dota-mini"
```

### Шаг 2: Установить зависимости бэкенда

```
cd backend
npm install
```

Это скачает все нужные библиотеки для серверной части. Подождите завершения (может занять 1-3 минуты).

**Если возникает ошибка с `better-sqlite3`:**
Выполните эту команду и попробуйте `npm install` заново:
```
npm install --build-from-source
```

Если и это не помогает, установите инструменты сборки:
```
npm install -g windows-build-tools
```

### Шаг 3: Установить зависимости фронтенда

Откройте **второй** терминал (новое окно PowerShell) и выполните:

```
cd "C:\Users\ulyan\dota-mini\frontend"
npm install
```

### Шаг 4: Запустить бэкенд (сервер)

В **первом** терминале (где вы в папке `backend`):

```
npm start
```

Вы увидите сообщение:
```
  ✓ Rucord сервер запущен: http://localhost:3001
  ✓ API доступно по адресу: http://localhost:3001/api
  ✓ Ожидаю подключений...
```

**Не закрывайте этот терминал!** Сервер должен работать, пока вы пользуетесь приложением.

### Шаг 5: Запустить фронтенд (интерфейс)

Во **втором** терминале (где вы в папке `frontend`):

```
npm run dev
```

Вы увидите:
```
  VITE v6.x.x  ready in xxx ms

  ➜  Local:   http://localhost:5173/
```

### Шаг 6: Открыть приложение

Откройте браузер (Chrome, Firefox, Edge) и перейдите по адресу:

**http://localhost:5173**

### Опционально: поиск GIF по ключевым словам

Чтобы в чате работал поиск гифок по словам (грустно, хахаха, смех и т.д.), нужен бесплатный API-ключ Giphy на **сервере**:

1. Зарегистрируйтесь на https://developers.giphy.com/ и создайте API Key (Create App → API).
2. В папке `backend` создайте файл `.env` (или добавьте в существующий) строку:
   ```
   GIPHY_API_KEY=ваш_ключ
   ```
3. Перезапустите бэкенд (`npm start` в папке backend). Без ключа поиск покажет подсказку; каталог и избранные GIF работают.

---

## Как пользоваться

### Регистрация

1. На странице входа нажмите "Зарегистрироваться"
2. Введите имя пользователя, email и пароль (минимум 6 символов)
3. Нажмите "Зарегистрироваться"

### Создание сервера

1. В левой панели нажмите зелёную кнопку **+**
2. Введите название сервера
3. Нажмите "Создать"

Автоматически создастся канал "общий" и роли "everyone" и "Владелец".

### Приглашение друзей

1. Выберите сервер
2. Нажмите кнопку "Пригласить" (зелёная, в правом верхнем углу)
3. Скопируйте инвайт-код и отправьте его другу

### Присоединиться к серверу

1. Нажмите фиолетовую кнопку со стрелкой (↗) в левой панели
2. Введите инвайт-код
3. Нажмите "Присоединиться"

### Отправка сообщений

1. Выберите сервер → выберите канал
2. Введите сообщение в поле внизу
3. Нажмите Enter или кнопку "➤"

Сообщения доставляются мгновенно всем участникам канала!

### Управление сервером (только для владельца)

1. Нажмите ⚙ рядом с названием сервера
2. Вкладка **Общие** — изменить название или удалить сервер
3. Вкладка **Роли** — создать роли, настроить права (что можно/нельзя делать)
4. Вкладка **Участники** — назначить роли, кикнуть участников

### Каналы

- Нажмите **+** рядом с "Текстовые каналы" чтобы создать новый
- Наведите на канал и нажмите **×** чтобы удалить

---

## Структура проекта

```
dota-mini/
├── backend/                 ← Серверная часть
│   ├── server.js            — Главный файл сервера
│   ├── database.js          — База данных (SQLite)
│   ├── middleware/
│   │   └── auth.js          — Проверка авторизации
│   ├── routes/
│   │   ├── auth.js          — Регистрация / Вход
│   │   ├── servers.js       — Управление серверами
│   │   ├── channels.js      — Управление каналами
│   │   ├── members.js       — Участники и роли
│   │   └── messages.js      — История сообщений
│   └── socket/
│       └── chat.js          — Реалтайм-сообщения
│
├── frontend/                ← Клиентская часть
│   ├── index.html           — HTML-страница
│   ├── vite.config.js       — Настройки сборщика
│   └── src/
│       ├── App.jsx          — Главный компонент
│       ├── App.css          — Все стили
│       ├── main.jsx         — Точка входа
│       ├── context/
│       │   └── AuthContext.jsx  — Состояние авторизации
│       ├── utils/
│       │   ├── api.js       — HTTP-запросы к серверу
│       │   └── socket.js    — Подключение Socket.IO
│       └── components/
│           ├── Auth/        — Страницы входа/регистрации
│           ├── ServerList/  — Панель серверов
│           ├── ChannelList/ — Список каналов
│           ├── Chat/        — Окно чата
│           ├── MemberList/  — Список участников
│           ├── Modals/      — Модальные окна
│           └── Settings/    — Настройки сервера
│
└── README.md                ← Этот файл
```

---

## Технологии

| Компонент | Технология | Зачем |
|-----------|-----------|-------|
| Сервер | Node.js + Express | Обрабатывает запросы |
| Реалтайм | Socket.IO | Мгновенные сообщения |
| База данных | SQLite | Хранение данных в файле |
| Фронтенд | React | Интерфейс пользователя |
| Сборщик | Vite | Быстрая сборка фронтенда |
| Авторизация | JWT + bcrypt | Безопасный вход |

---

## Возможные проблемы

### "npm: not recognized" или "node: not recognized"
→ Node.js не установлен или не добавлен в PATH. Переустановите Node.js и перезагрузите компьютер.

### Ошибка при установке better-sqlite3
→ Нужны инструменты сборки C++. В PowerShell от имени администратора:
```
npm install -g windows-build-tools
```

### Порт 3001 или 5173 уже занят
→ Закройте другие программы, использующие эти порты, или измените порт в `backend/server.js` (строка с PORT) или `frontend/vite.config.js`.

### CORS ошибка в браузере
→ Убедитесь, что бэкенд запущен на порту 3001 и фронтенд на 5173.

---

## Как остановить

- Для остановки сервера или фронтенда нажмите `Ctrl+C` в соответствующем терминале
- Данные сохраняются в файле `backend/rucord.db` — это файл базы данных. Не удаляйте его, если хотите сохранить историю!
